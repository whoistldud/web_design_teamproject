<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" 
    rel="stylesheet"
    integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
    crossorigin="anonymous">

    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>

    <!-- Bootstrap icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">

    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>


    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <% include ./../layout/loginheader.ejs %>
    <% include ./../layout/category.ejs %>

    <div>
      <div class="row" style="height: 500px;">
        <div class="col-2" >
          <!-- ì•ˆì— ë“¤ì–´ê°€ëŠ” ë‚´ìš©ì˜ heightì´ 500px ë¯¸ë§Œì´ë©´ style="height: 500px" ì´ë ‡ê²Œ ì„¤ì •-->
          <% include ./../layout/menubar.ejs %>
        </div>
        <div class="col-10" >
          <!-- ë‚´ìš© ë“¤ì–´ê°ˆ ìë¦¬ !!! -->
          <div class="row mb-2">
            <h6 id="navtext">HOME > Q&A </h6>
          </div>
          <div class="container">
              <div class="input-form-backgroud row">
                <div class="input-form col-md-12 mx-auto">
                  <h4 class="mb-2" style="font-weight: bold;">ğŸ—¨ï¸ Q&A</h4>
                  <h6 class="mb-3" style="font-size: 10pt">ì´ ê³µê°„ì€ ëª¨ë‘ì˜ Q&Aë¥¼ ë³¼ ìˆ˜ ìˆëŠ” ê²Œì‹œíŒì…ë‹ˆë‹¤.</h6>
                  <form class="validation-form mb-2"  id = "qnaList" action="qnaList" method = "post" >
                    <div id="main">
                      <button type="button" class="btn mb-3" style=" width: 100px; color: #ffffff; background-color : #191B5E;"
                              onclick="newqna()">ê¸€ì“°ê¸°</button>
                      <table class="mb-3" id="myQNAlist" width="1200px">
                        <tbody>
                          <tr bgcolor="#DFE7F6" align="center">  
                            <th>ë²ˆí˜¸</th>
                            <th>ì œëª©</th>
                            <th>ì‘ì„±ì¼</th>
                            <th>ì‘ì„±ì</th>
                            </tr>
                        <% for(var i=0; i < row.length; i++) {  item = row[i];  %>
                          <tr align="center">
                            <td><p alt="ë²ˆí˜¸"><%= row[i].id %></p></td>
                            <td><p alt="ì œëª©" onclick="readQna(<%=row[i].id%>,<%=row[i].lock_post%> , '<%=row[i].password%>' )"><% if (row[i].lock_post == 2) { %>
                              ğŸ”’
                            <%}%> <%= row[i].title %></p>  
                            </td>
                            <td><p alt="ì‘ì„±ì¼"><%= row[i].date %></p></td>
                            <td><p alt="ì‘ì„±ì"><%= row[i].name %></p></td>
                          </tr>
                          <% } %>
                        </tbody>
                      </table>

                      
                  </div>
                </form>
                </div>
              </div></div>
            </div>

  </body>
</html>
</body>
<% include ./../layout/footer.ejs %>
</html>

<script>
  function newqna(){
    location.href = "/consumer/qna/register"
  }

  
  function readQna(id, lock, pw){
    // alert(lock);
    if (lock == 2) {
      // alert(pw);
      var pwInput = prompt("ë¹„ê³µê°œê¸€ì…ë‹ˆë‹¤. ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”~"+"");
      if (pwInput == pw){
        location.href = "/consumer/qna/read/" +id;
      }
      else{
        alert("ë¹„ë°€ë²ˆí˜¸ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.");
      }
    }
    else {
      location.href = "/consumer/qna/read/" +id;
    }
    
  }

</script>