<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>

      <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    
    <!-- Bootstrap icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
    

    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-252063061-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-252063061-2');
</script>

    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <!-- index.js는 회원가입이 안 되어 있는 곳 = 홈화면이 보이긴 하나,
      무엇이든 클릭하면 회원가입으로 넘어가도록!-->
    <% include ./../layout/loginheader.ejs %>
    <% include ./../layout/category.ejs %>

    <div>
      <div class="row" style="min-height: 550px;">
        <div class="col-2" >
          <% include ./../layout/menubar.ejs %>
        </div>
        <div class="col-10" >
          <div class="row">
            <h6 id="navtext">HOME > 장바구니</h6>
            </div>
            <div class="row mb-2">
                <h5 style="font-weight: bold;">🛍️ <%= consum[0].name %> 님의 장바구니 🎈</h5>
            </div>
            <div class="container">
            <form class="validation-form"  id = "mycart" action="mycart" method = "post" >
              
                <table id="myordertable" width="1000">
                  <tbody>
                    <tr bgcolor="#DFE7F6" align="center"> 

                      <th>번호</th>
                      <th>상품명</th>
                      <th></th>
                      </tr>
                  <% for(var i=0; i < info.length; i++) {  
                    %>
                    <tr>
                     
                      <td align="center"><p alt="번호"><%= i+1 %></p></td>
                      <td align="center"><p alt="상품명"  onclick="toproduct(<%= info[i].productId %>)"><%= info[i].prodName %></p></td>
                      <td><button type="button" onclick="location.href='/consumer/mycartlist/delete/<%=info[i].id%>'" 
                          class="btn btn-primary mb-3" style="float:right; color: #ffffff; background-color : #191B5E;" >삭제</button></td>
                     
                      
                    </tr>
                    <% } %>
                  </tbody>
                </table>
            </form>
          </div>
            
            <div> <br/></div>
          </div>
        </div>
      </div>
    </div>
  
  
  </body>
  <% include ./../layout/footer.ejs %>
</html>
<script>
    function toproduct(id){
      console.log(id);
      location.href="/consumer/mycartlist/" +id;
    }
/*
    // 전체 선택 체크버튼 동작
    $('input[name=_selected_all_]').on('change', function(){
  $('input[name=_selected_]').prop('checked', this.checked);
});
			

  $("#rmbtn").click(function(){ 
			
			let rowData = [];
			var checkbox = $("input[name=_selected_]:checked");
			
			// 체크된 체크박스 값을 가져온다
			checkbox.each(function(i) {
	
				// checkbox.parent() : checkbox의 부모는 <td>이다.
				// checkbox.parent().parent() : <td>의 부모이므로 <tr>이다.
				var tr = checkbox.parent().parent().eq(i);
				var td = tr.children();
				let real = document.getElementById("cb").value;

				//rowData.push(tr.text());
				rowData.push(real);
        console.log("real", real);

			});
			
			console.log(rowData);	
      location.href ="/consumer/outofcart";
      //rowData= [];
		});
*/
  </script>
