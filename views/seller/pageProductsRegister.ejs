<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>

      <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    
    <!-- Bootstrap icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
    

    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-S5M9QB9WB7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-S5M9QB9WB7');
    </script>

    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <!-- index.jsëŠ” íšŒì›ê°€ì…ì´ ì•ˆ ë˜ì–´ ìˆëŠ” ê³³ = í™ˆí™”ë©´ì´ ë³´ì´ê¸´ í•˜ë‚˜,
      ë¬´ì—‡ì´ë“  í´ë¦­í•˜ë©´ íšŒì›ê°€ì…ìœ¼ë¡œ ë„˜ì–´ê°€ë„ë¡!-->
      <% include ./../layout/sellerloginheader.ejs %>
      <% include ./../layout/sellercategory.ejs %>

    <div>
      <div class="row" style="min-height: 550px;">
        <div class="col-2" >
          <% include ./../layout/sellermenubar.ejs %>
        </div>
        <div class="col-10" >
          <div class="row">
            <h6 id="navtext">HOME > ìƒí’ˆ ë“±ë¡</h6>
          </div>
            <div class="container mt-2">
              <div class="col-10">
                <div class="input-form-backgroud row">
                  <div class="input-form col-md-12 mx-auto">
                    <h4 class="mb-3" style="font-weight: bold;">ğŸª„ ìƒˆë¡œìš´ ìƒí’ˆì„ ë“±ë¡í•©ë‹ˆë‹¤</h4>
                    <form class="validation-form"  enctype="multipart/form-data" id = "pageProductsRegister" action="product/write" method = "post" >
                        <div class="row">
                          <div class="col-md-6 mb-3">
                              <label for="floatingTextarea">ğŸ–ï¸ ìƒí’ˆ ì´ë¦„</label>
                              <input type="text" class="form-control" id="name" name="name" placeholder="ìƒí’ˆ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”." required>
            
                          </div>
                          <div class="col-md-6 mb-3">
                            <label for="category">ğŸ·ï¸ ì¹´í…Œê³ ë¦¬</label>
                            <select class="form-select" aria-label="Default select example" id="category" name="category">
                                <option value="1">ë‹¤ì´ì–´ë¦¬</option>
                                <option value="2">í•„ê¸°ë…¸íŠ¸</option>
                                <option value="3">ìŠ¤í‹°ì»¤</option>
                                <option value="4">ë°°ê²½í™”ë©´</option>
                              </select>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="formFileMultiple" class="form-label">ğŸ“Œ ëŒ€í‘œ ì´ë¯¸ì§€</label>
                            <input class="form-control" type="file" id="thumbnailimageurl" name="thumbnailimageurl" required>
                            <img id="previewThumbnailImg" width="400" alt="ì´ë¯¸ì§€ ì˜ì—­" />
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="input-group">ğŸ“‘ ìƒì„¸ì •ë³´</label>
                            <textarea class="form-control" aria-label="With textarea" 
                            placeholder="ìƒí’ˆ ìƒì„¸ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”." id="detail", name="detail"></textarea>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="formFileMultiple" class="form-label">ğŸ“‘ ìƒì„¸ ì •ë³´ì— ì²¨ë¶€í•  ì‚¬ì§„</label>
                            <input class="form-control" type="file" id="detailimageurl" name="detailimageurl" accept="image/*">
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-6 mb-3">
                          <label for="floatingTextarea">ğŸ’° ê°€ê²©</label>
                            <input type="text" class="form-control" id="price" name="price"
                            required>
                        </div>
                        <div class="col-md-6 mb-2">
                          <label for="formFileMultiple" class="form-label">ğŸ”— ì—…ë¡œë“œí•  íŒŒì¼ ì²¨ë¶€ ğŸ”“</label>
                            <div class="container">
                            <!-- íƒ­ ë©”ë‰´ ìƒë‹¨ ì‹œì‘ -->
                              <ul class="tabs" style="margin-left :20px;">
                                <li class="tab-link current" data-tab="tab-1">íŒŒì¼ì²¨ë¶€</li>
                                <li class="tab-link" data-tab="tab-2">ê³µë™ì‘ì—…</li>
                              </ul>
                              <!-- íƒ­ ë©”ë‰´ ë‚´ìš© ì‹œì‘ -->
                              <div id="tab-1" class="tab-content current">
                                <input class="form-control" type="file" id="fileurl" name="fileurl" accept=".pdf">
                              </div>
                              <div id="tab-2" class="tab-content">
                                <select class="form-select" aria-label="Default select example" id="workfileurl" name="workfileurl">
                                  <option selected disabled>ê³µë™ì‘ì—…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</option>
                                  <% for(var i=0; i<workrooms.length; i++){ var room = workrooms[i];  %>
                                    <option value="<%=room.Imageurl%>"><%=room.title%></option>
                                    <% } %>
                                </select>                              
                              </div>
                            <!-- íƒ­ ë©”ë‰´ ë‚´ìš© ë -->
                            </div>
                        </div>
                      </div>
                      <div class="row mt-2 mb-3">
                        <div class="col-4">
                          <button class="btn btn-primary btn-lg btn-block" id="productregister" type="submit"
                                  onclick="register()" style="color: #ffffff; background-color : #191B5E;">ìƒí’ˆ ë“±ë¡</button>
                        </div>

                            
                      </div>
                    </div>
                    </form>
                </div>
              </div>
              </div>
              <div class="col-2"></div>
          
          
        </div>
      </div>
    </div>
  
  
  </body>
  <% include ./../layout/footer.ejs %>
</html>

<script>
  
  $(document).ready(function(){
    $('ul.tabs li').click(function(){							//ì„ íƒìë¥¼ í†µí•´ tabs ë©”ë‰´ë¥¼ í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ì§€ì •í•´ì¤ë‹ˆë‹¤.
      var tab_id = $(this).attr('data-tab');

      $('ul.tabs li').removeClass('current');			//ì„ íƒ ë˜ìˆë˜ íƒ­ì˜ current cssë¥¼ ì œê±°í•˜ê³  
      $('.tab-content').removeClass('current');		

      $(this).addClass('current');								////ì„ íƒëœ íƒ­ì— current classë¥¼ ì‚½ì…í•´ì¤ë‹ˆë‹¤.
      $("#" + tab_id).addClass('current');
    })
  });

  const input = document.querySelector('#price');
  input.addEventListener('keyup', function(e) {
    let value = e.target.value;
    value = Number(value.replaceAll(',', ''));
    if(isNaN(value)) {
      input.value = 0;
    }else {
      const formatValue = value.toLocaleString('ko-KR');
      input.value = formatValue;
    }
  });

  const fileInput = document.getElementById("thumbnailimageurl");
  console.log(fileInput);

  const handleFiles = (e) => {
    const selectedFile = [...fileInput.files];
    const fileReader = new FileReader();

    fileReader.readAsDataURL(selectedFile[0]);

    fileReader.onload = function () {
      document.getElementById("previewThumbnailImg").src = fileReader.result;
    };
  };

  fileInput.addEventListener("change", handleFiles);


</script>