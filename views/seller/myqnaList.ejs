<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>

      <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    
    <!-- Bootstrap icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
    

    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>


    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <!-- index.js는 회원가입이 안 되어 있는 곳 = 홈화면이 보이긴 하나,
      무엇이든 클릭하면 회원가입으로 넘어가도록!-->
    <% include ./../layout/loginheader.ejs %>
    <% include ./../layout/sellercategory.ejs %>

    <div>
      <div class="row" style="height: 500px;">
        <div class="col-2" >
          <!-- 안에 들어가는 내용의 height이 500px 미만이면 style="height: 500px" 이렇게 설정-->
          <% include ./../layout/sellerpgmenubar.ejs %>
        </div>
        <div class="col-10" >
          <!-- 내용 들어갈 자리 !!! -->
          <div class="container">
            <div class="input-form-backgroud row">
              <div class="input-form col-md-12 mx-auto">
                <!-- <h4 class="mb-3">등록 상품 목록</h4> -->
                <div class="row">
                    <h6 id="navtext">HOME > 마이페이지 > 내 Q&A</h6>
                  </div>
                  <button type="button" class="btn btn-primary mb-3" style="float:right" onclick="newqna()">글쓰기</button>
                  <table>
                    <tbody>
                      <tr>  
                        <td>번호</td>
                        <td>제목</td>
                        <td>작성일</td>
                        <td>작성자</td>
                        </tr>
                    <% for(var i=0; i < row.length; i++) {  
                      %>
                      <tr>
                        <td><p alt="번호"></p><%= row[i].id %></td>                      
                        <td><p alt="제목" onclick="readQna(<%=row[i].id%>,<%=row[i].lock_post%> , '<%=row[i].password%>' )"><% if (row[i].lock_post == 2) { %>
                          !!비밀!!
                        <%}%> <%= row[i].title %></p>  
                        </td>
                        <td><p alt="작성일"><%= row[i].date %></p></td>
                        <td><p alt="작성자"><%= row[i].name %></p></td>
                      </tr>
                      <% } %>
                    </tbody>
                  </table>
              </div>
            </div>
          
          
        </div>
      </div>
    </div>
  
  
  </body>
  <% include ./../layout/footer.ejs %>
</html>

<script>
    function newqna(){
    location.href = "/seller/qna/register"
  }
  

  function readQna(id, lock, pw){
    // alert(lock);
    if (lock == 2) {
      // alert(pw);
      var pwInput = prompt("비공개글입니다. 비밀번호를 입력해주세요~"+"");
      if (pwInput == pw){
        location.href = "/seller/qna/read/" +id;
      }
      else{
        alert("비밀번호가 잘못되었습니다.");
      }
    }
    else {
      location.href = "/seller/qna/read/" +id;
    }
    
  }


  

  </script>