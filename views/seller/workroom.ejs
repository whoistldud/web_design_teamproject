<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>

      <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    
    <!-- Bootstrap icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
    

    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-S5M9QB9WB7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-S5M9QB9WB7');
    </script>

    <title>able</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <!-- index.js는 회원가입이 안 되어 있는 곳 = 홈화면이 보이긴 하나,
      무엇이든 클릭하면 회원가입으로 넘어가도록!-->
    <% include ./../layout/sellerloginheader.ejs %>
    <% include ./../layout/sellercategory.ejs %>

    <div>
      <div class="row" style="min-height: 550px;">
        <div class="col-2" >
          <!-- 안에 들어가는 내용의 height이 500px 미만이면 style="height: 500px" 이렇게 설정-->
          <% include ./../layout/sellermenubar.ejs %>
        </div>

        <div class="col-10" >          

          <!-- 내용 들어갈 자리 !!! -->
          <div class="row">
            <h6 id="navtext">HOME > 상품제작 </h6>
          </div>
            <div class="row" style="height: 20px;"></div>
              <button class="btn btn-open" href="#pop_info_1" id="btn-open" onclick="location.href='#pop_info_1';" style="background-color: #DFE7F6; border-radius: 10px; box-shadow: #ced5e0 2px 2px 2px;">상품 제작하러 가기
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
                </svg>
              </button>      

              <div class="row">
                <div class="col-2"></div>
                <div class="col-8">
                  <button class="btn btn-sm" id = "searchbtn" style="float: right; margin-left: 10px; background-color: #cbdbf9; " onclick="search()" >검색</button>    
                  <input class="form-control form-control-sm" type="text" style="float: right; width:40%;" id = "search" onkeyup="if(window.event.keyCode==13){search()}"/>               
                </div>
                <div class="col-2"></div>            
              </div>
                   
            <div class="col-2 col-lg-3"></div>
            <div class="col-8 col-lg-6"> 
              <b><text>참여중인 공동작업방</text></b>
              <table width="1200px;" id="mygoodslist">
                <tbody>
                  <tr bgcolor="#DFE7F6" align="center">  
                    <th>번호</th>
                    <th>이름</th>
                    <th>판매자</th>
                    <th></th>
                    </tr>

                  <% for(var i=0; i<myrooms.length; i++){ var myroom = myrooms[i];  %>
                    <tr align="center">
                      <td><p alt="번호"><%= i+1 %></p></td>                      
                      <td><p alt="이름"><%= myroom.title %> (<%= myroom.currentnum%> / <%= myroom.maximum%> )</p></td>  
                      <td><p alt="판매자"><%= myroom.sellerId %></p></td>               
                      <td>
                        <p> <button type="button" class="btn btn-sm" id="enterbtn" onclick="location.href='/draw/<%=myroom.workId%>';"style="background-color: #cbdbf9;">참여하기</button> </p>
                      </td>
                    </tr>
                    <% } %>
                </tbody>
              </table>
              <br>
              <b><text>공개 공동작업방</text></b>
              <table width="1200px;" id="mygoodslist">
                <tbody>
                  <tr bgcolor="#DFE7F6" align="center">  
                    <th>번호</th>
                    <th>이름</th>
                    <th>판매자</th>
                    <th></th>
                    </tr>

                  <% for(var i=0; i<rooms.length; i++){ var room = rooms[i];  %>
                    <tr align="center">
                      <td><p alt="번호"><%= i+1 %></p></td>                      
                      <td><p alt="이름"><%= room.title %> (<%= room.currentnum%> / <%= room.maximum%> )</p></td>  
                      <td><p alt="판매자"><%= room.sellerId %></p></td>               
                      <td>
                        <p> <button type="button" class="btn btn-sm" id="enterbtn" onclick="location.href='/draw/<%=room.workId%>';"style="background-color: #cbdbf9;">참여하기</button> </p>
                      </td>
                    </tr>
                    <% } %>
                </tbody>
              </table>

                <div id="pop_info_1" class="pop_wrap" style="display:none;">
                  <div class="pop_inner">
                    <p class="dsc">공동작업 방 만들기</p>
                        <form action="creatework" method="post" class="room-form">
                            <div class="form-group">
                                <input type="text" name="title" placeholder="방 이름" id="title"
                                      class="form-username form-control" id="form-username" required>
                                <br>
                                <input type="number" name="maximum" placeholder="최대 인원" id="maximum"
                                      max = 5 min = 2 class="form-username form-control" id="form-username" required>
                                <br>
                                <div class="form-username form-control" id="form-username">
                                    비밀방
                                    <input type="radio" id="private" name="private" value="1" checked="checked">공개
                                    <input type="radio" id="private" name="private" value="0">비공개
                                </div>
                            </div>
                            <button type="submit" class="btn btn-sm  mb-1 mt-1" 
                                    style="color: #ffffff; background-color : #191B5E;">방 만들기</button>
                        </form>
                        <button type="button" class="btn btn-sm btn-outline-dark btn_close" >닫기</button>
                    </div>
                </div>
              </table>
            </div>
            <div class="col-2 col-lg-3"></div>
          </div>
        </div>
      </div>
    </div>
  
  </body>
  <% include ./../layout/footer.ejs %>


  <script>    
      const search = () => {
          const id = document.getElementById("search").value;
          window.location.href = '/seller/worklist/'+id;
      };

      var target = document.querySelectorAll('.btn-open');
      var btnPopClose = document.querySelectorAll('.pop_wrap .btn_close');
      var targetID;
      // 팝업 열기
      for(var i = 0; i < target.length; i++){
          target[i].addEventListener('click', function(){
              targetID = this.getAttribute('href');
              document.querySelector(targetID).style.display = 'block';
          });
      }
      // 팝업 닫기
      for(var j = 0; j < target.length; j++){
          btnPopClose[j].addEventListener('click', function(){
              this.parentNode.parentNode.style.display = 'none';
          });
      }
  </script>

</html>